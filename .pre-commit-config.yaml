repos:
  - repo: https://github.com/renovatebot/pre-commit-hooks
    rev: 42.66.11
    hooks:
      - id: renovate-config-validator
        args: [--strict]
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.37.1
    hooks:
      - id: yamllint
        args: [-c=.yamllint.yaml]
  - repo: https://github.com/tarioch/flux-check-hook
    rev: v0.8.0
    hooks:
      - id: check-flux-helm-values
  - repo: https://github.com/gitguardian/ggshield
    rev: v1.46.0
    hooks:
      - id: ggshield
        language_version: python3
        stages: [pre-commit]
  - repo: local
    hooks:
      - id: kustomize-build
        name: Validate kustomize builds
        entry: bash -c 'for dir in apps/*/; do kustomize build "$dir" > /dev/null || exit 1; done && for dir in flux/*/; do kustomize build "$dir" > /dev/null || exit 1; done'
        language: system
        pass_filenames: false