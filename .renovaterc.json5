{
  // Use Renovate's base preset for sensible defaults
  "extends": ["config:base"],

  // Never automerge; always open PRs for manual review
  "automerge": false,

  // Assign all Renovate PRs to this GitHub user
  "assignees": ["jeversol"],

  // BUILT-IN MANAGERS CONFIGURATION

  // 1. Kustomize manager handles all kustomization.yaml files
  "kustomize": {
    "fileMatch": [
      "^infrastructure/.*/kustomization\\.ya?ml$"
    ]
  },

  // 2. Generic Kubernetes manager handles other YAML manifests
  "kubernetes": {
    // Exclude kustomization files so they go to the kustomize manager
    "managerFilePatterns": [
      "!^.*\\/kustomization\\.ya?ml$",
      "\\.ya?ml$"
    ]
  },

  // REGEX MANAGERS for custom version tracking
  "regexManagers": [
    {
      // Track Talos Linux GitHub releases in track-versions.yaml
      "fileMatch": [
        "^infrastructure/cluster/track-versions\\.ya?ml$"
      ],
      "matchStrings": [
        // Captures lines like talosVersion: v1.5.0
        "talosVersion:\\s+v?(?<currentValue>\\d+\\.\\d+\\.\\d+)"
      ],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "siderolabs/talos",
      "versioningTemplate": "semver"
    },
    {
      // Track Kubernetes version in track-versions.yaml
      "fileMatch": [
        "^infrastructure/cluster/track-versions\\.ya?ml$"
      ],
      "matchStrings": [
        // Captures lines like kubernetesVersion: v1.24.3
        "kubernetesVersion:\\s+v?(?<currentValue>\\d+\\.\\d+\\.\\d+)"
      ],
      "datasourceTemplate": "github-tags",
      "depNameTemplate": "kubernetes/kubernetes",
      "versioningTemplate": "semver"
    }
  ],
}