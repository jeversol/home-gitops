---
apiVersion: volsync.backube/v1alpha1
kind: ReplicationSource
metadata:
  name: plex-config-backup
  namespace: media
spec:
  sourcePVC: config-plex-0
  trigger:
    schedule: "15 2 * * *"  # Daily at 2:15 AM (after Longhorn backups)
  restic:
    repository: volsync-restic-config
    retain:
      hourly: 24
      daily: 30
      weekly: 4
      monthly: 12
    copyMethod: Snapshot
    pruneIntervalDays: 7
    storageClassName: longhorn
    accessModes:
      - ReadWriteOnce